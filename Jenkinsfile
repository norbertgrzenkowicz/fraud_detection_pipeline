pipeline {
    agent any

    stages {
        stage('Build') {
            steps {
                echo 'Building..'
                sh 'docker-compose up -d'
            }
        }
        stage('Test') {
            steps {
                echo 'Testing..'
                sh 'curl -X POST "http://localhost:8100/predict" -H "Content-Type: application/json" -d \'{\"Time\": 151286.0, \"V1\": -1.283143795718, \"V2\": -0.844000117728, \"V3\": 2.568569206224, \"V4\": -0.499431313524, \"V5\": 0.0753872465, \"V6\": -1.270077366353, \"V7\": 0.394572286331, \"V8\": -1.081260469094, \"V9\": 1.185694517993, \"V10\": -0.554127684353, \"V11\": -0.326845521923, \"V12\": 1.843859625707, \"V13\": 0.545676239052, \"V14\": 0.399648534239, \"V15\": 0.133206149608, \"V16\": -0.005156703292, \"V17\": 1.889110374068, \"V18\": 0.132439305377, \"V19\": 0.168066572872, \"V20\": 0.766148523442, \"V21\": -1.323289017777, \"V22\": -0.511857308692, \"V23\": -0.99375223135, \"V24\": -0.350672043067, \"V25\": 0.837437623982, \"V26\": -0.830720233847, \"V27\": -0.895553490449, \"V28\": 1.07607051852, \"Amount\": 0.788034601603}\''
            }
        }
        stage('Deploy') {
            steps {
                echo 'Deploying.... Docker Container in next stint'
            }
        }
    }
}